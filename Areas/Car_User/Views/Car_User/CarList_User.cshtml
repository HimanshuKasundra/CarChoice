@using CarChoice.BAL;
@model DataTable;

@using System.Data;

@{
    ViewData["Title"] = "Car List";
    Layout = "~/Views/Shared/_Layout_CarList.cshtml";

    DateTime PickupDate = Convert.ToDateTime(TempData["PickupDate"]);
    DateTime ReturnDate = Convert.ToDateTime(TempData["ReturnDate"]);

    TimeSpan value = ReturnDate.Subtract(PickupDate);
    int day = 0;
    if (value.Days < 0)
    {
        day = 1;
    }
    
    else
    {
        day = value.Days;
    }

    //double? totalCost = day * Model.Rent;

}
<section class="section">
    <h1 class=" fw-bold" style="color:black; font-size:xx-large; margin-left:40px;">Car<span class="  fw-bold " style="color:yellowgreen;  font-size:xx-large;">List</span></h1>
    <div style=" margin-top:2px;  margin-left:30px;  margin-right:30px;  ">

        <div class="row">
            @foreach (DataRow dataRow in Model.Rows)
            {

                @*  <div class="col-md-3" style="margin-bottom:10px;">
            <div class="card  " style="padding-top:10px; padding-left:10px; padding-bottom">
            <img src=@Url.Content(@dataRow["CarImageURL"].ToString()) class="img-thumbnail" style="  height:190px; width:16.5rem;" alt="..." />*@
                @*<div class="card-body">
            <h4 class="card-title" style="font-family:'Times New Roman', Times, serif; font:500">@dataRow["CarName"]</h4>
            <h5 class="card-text" style="font-family:'Times New Roman', Times, serif;">@dataRow["BrandName"]</h5>
            </div>*@
                @* <table>
            <tr><td colspan="2" style="text-align:center; font-family:'Times New Roman'; font-size:xx-large; font-weight:700;">@dataRow["CarName"]</td> </tr>
            <tr><td colspan="2" style="text-align:center; font-family:'Times New Roman'; font-size:x-large; font-weight:300;">@dataRow["BrandName"]</td></tr>

            <tr class="col-md-6">
            <td class="col-md-6" style="font-family:'Times New Roman', Times, serif; text-align:center; font-size:medium; color:grey; font:100">Transmission</td>
            <td class="col-md-6" style="font-family:'Times New Roman', Times, serif; text-align:center; font-size:medium; color:grey; font:100">Fuel Type</td>
            </tr>
            <tr>
            <td class="col-md-6" style="font-family:'Times New Roman', Times, serif; text-align:center; font-size:large; font:300">@dataRow["TransmissionType"]</td>
            <td class="col-md-6" style="font-family:'Times New Roman', Times, serif; text-align:center; font-size:large; font:300">@dataRow["FuelType"]</td>
            </tr>
            </table>

            <table style="margin-top:15px;">
            <tr>
            <td class="col-md-6" style="font-family:'Times New Roman', Times, serif; text-align:center; font-size:medium;color:grey; font:100">Year</td>
            <td class="col-md-6" style="font-family:'Times New Roman', Times, serif; text-align:center; font-size:medium;color:grey; font:100">Rent</td>
            </tr>
            <tr style="margin-top:3em;">
            <td class="col-md-6" style="font-family:'Times New Roman', Times, serif; text-align:center; font-size:large; font:100">@dataRow["Year"]</td>
            <td class="col-md-6" style="font-family:'Times New Roman', Times, serif; text-align:center; font-size:large; font:100">
            @Convert.ToDouble(dataRow["Rent"].ToString())
            <span>&#8377</span>/day
            </td>
            </tr>
            <tr >
            <td  class="justify-content-center  text-center">
            <div class="d-flex justify-content-center">
            <div class="me-2">
            <form asp-area="Car_User" asp-controller="Car_User" asp-action="Car_Book">
            <input type="hidden" value="@Convert.ToInt32(dataRow["CarID"].ToString())" name="CarID" />
            <button type="submit" class="btn btn-primary" value="Detals">Book</button>
            </form>
            </div>
            <div class="ms-2">
            <form method="post" asp-area="Car_User" asp-controller="Car_User" asp-action="CarDetails_User">
            <input type="hidden" value="@Convert.ToInt32(dataRow["CarID"].ToString())" name="CarID" />
            <button type="submit" class="btn btn-warning" value="Detals">Details</button>
            </form>
            </div>
            </div>
            </td>
            </tr>
            </table>*@




                <div class="card col-md-3" style="margin-right:5px;">
                    <img src=@Url.Content(@dataRow["CarImageURL"].ToString()) class="img-thumbnail" style="  height:190px; width:90;" alt="..." />
                    <div class="card-body">
                        <h3 class="card-title text-center font-weight-bold">@dataRow["CarName"]</h3>
                        <p class="card-subtitle text-center font-weight-light">@dataRow["BrandName"]</p>

                        <div class="row mt-1">
                            <div class="col-md-6">
                                <p class="text-center font-weight-light">Transmission</p>
                                <p class="text-center ">@dataRow["TransmissionType"]</p>
                            </div>
                            <div class="col-md-6">
                                <p class="text-center font-weight-light">Fuel Type</p>
                                <p class="text-center ">@dataRow["FuelType"]</p>
                            </div>
                        </div>

                        <div class="row mt-1">
                            <div class="col-md-6">
                                <p class="text-center font-weight-light">Year</p>
                                <p class="text-center ">@dataRow["Year"]</p>
                            </div>
                            <div class="col-md-6">
                                <p class="text-center font-weight-light">Rent</p>
                                <p class="text-center ">
                                    @Convert.ToDouble(dataRow["Rent"])<span>&#8377;</span>/day
                                </p>
                            </div>
                        </div>

                        <div class="row mt-2">
                            <div class="col-md-6 text-center">
                                <form asp-area="Car_User" asp-controller="Car_User" asp-action="CarDetails_User" asp-route-PickupDate="@PickupDate.ToString()" asp-route-ReturnDate="@ReturnDate.ToString()" onclick="return fun1();">
                                    <input type="hidden" value="@Convert.ToInt32(dataRow["CarID"].ToString())" name="CarID" />
                                    <button type="submit" class="btn btn-primary me-2">Book Now</button>
                                </form>
                            </div>
                            <div class="col-md-6 text-center">
                                <form method="post" asp-area="Car_User" asp-controller="Car_User" asp-action="CarDetails_User" asp-route-PickupDate="@PickupDate.ToString()" asp-route-ReturnDate="@ReturnDate.ToString()">
                                    <input type="hidden" value="@Convert.ToInt32(dataRow["CarID"].ToString())" name="CarID" />
                                    <button type="submit" class="btn btn-warning ms-2">Details</button>
                                </form>
                            </div>
                        </div>

                    </div>
                </div>






            }
        </div>

    </div>
</section>
@section Scripts
    {
    <script>
        function fun1() {
            if (confirm("Are you sure you want to Book this Car \n From @PickupDate.ToString() To @ReturnDate.ToString()")) {
                return true;
            }
            else {
                return false;
            }
        }
    </script>
}