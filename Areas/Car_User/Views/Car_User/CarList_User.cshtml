@using CarChoice.BAL;
@model DataTable;

@using System.Data;

@{
    ViewData["Title"] = "Car List";
    //Layout = "~/Views/Shared/_Layout_CarList.cshtml";
    Layout = "~/Views/Shared/_Layout.cshtml";


    DateTime PickupDate = Convert.ToDateTime(TempData["PickupDate"]);
    DateTime ReturnDate = Convert.ToDateTime(TempData["ReturnDate"]);

    TimeSpan value = ReturnDate.Subtract(PickupDate);
    int day = 0;
    if (value.Days < 0)
    {
        day = 1;
    }
    
    else
    {
        day = value.Days;
    }

    //double? totalCost = day * Model.Rent;

}

<section class="hero-wrap hero-wrap-2 js-fullheight" style="background-image: url('@Url.Content("~/images/bg_3.jpg")');background-size: cover; background-position: center;" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text js-fullheight align-items-end justify-content-start">
            <div class="col-md-9 ftco-animate pb-5">
                <h1 class=" fw-bold" style="color:black; font-size:xx-large; margin-left:40px; font-family:'Times New Roman', Times, serif;">Car<span class="  fw-bold " style="color:yellowgreen; font-family:'Times New Roman', Times, serif; font-size:xx-large;">List</span></h1>
                <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Home <i class="ion-ios-arrow-forward"></i></a></span> <span>Contact <i class="ion-ios-arrow-forward"></i></span></p>


            </div>
        </div>
    </div>
</section>

<section class="section">
    <div >
    <div style=" margin-top:2px;  margin-left:30px;  margin-right:30px;  ">

        <div class="row" >
            @foreach (DataRow dataRow in Model.Rows)
            {
                    <div class="card col-md-4" style="margin-top:20px">
                    <img src=@Url.Content(@dataRow["CarImageURL"].ToString()) class="img-thumbnail" style="  height:190px; width:90; margin-top:15px" alt="..." />
                    <div class="card-body">
                        <h3 class="card-title text-center font-weight-bold" style="font-family:'Times New Roman', Times, serif;">@dataRow["CarName"]</h3>
                        @*<h4 class="card-subtitle text-center font-weight-light">@dataRow["BrandName"]</h4>*@

                        <div class="row ">
                            <div class="col-md-3">
                                <p class="text-center font-weight-light" style="font-family:'Times New Roman', Times, serif; color:darkgray; font-size:large;">Brand</p>
                                <p class="text-center " style="font-family:'Times New Roman', Times, serif font-size:large;">@dataRow["BrandName"]</p>
                            </div>
                            <div class="col-md-6">
                                <p class="text-center font-weight-light" style="font-family:'Times New Roman', Times, serif; color:darkgray;font-size:large;">Transmission</p>
                                <p class="text-center " style="font-family:'Times New Roman', Times, serif; font-size:large;">@dataRow["TransmissionType"]</p>
                            </div>
                            <div class="col-md-3">
                                <p class="text-center font-weight-light" style="font-family:'Times New Roman', Times, serif; color:darkgray;">Fuel</p>
                                <p class="text-center " style="font-family:'Times New Roman', Times, serif ;font-size:large;">@dataRow["FuelType"]</p>
                            </div>
                        </div>
                        <div class="row ">
                            <div class="col-md-6">
                                <p class="text-center font-weight-light" style="font-family:'Times New Roman', Times, serif; color:darkgray; font-size:large;">Year</p>
                                <p class="text-center " style="font-family:'Times New Roman', Times, serif; font-size:large;">@dataRow["Year"]</p>
                            </div>
                            <div class="col-md-6">
                                <p class="text-center font-weight-light" style="font-family:'Times New Roman', Times, serif; font-size:large; color:darkgray;">Rent</p>
                                <p class="text-center " style="font-family:'Times New Roman', Times, serif; font-size:large;">
                                    @Convert.ToDouble(dataRow["Rent"])<span>&#8377;</span>/day
                                </p>
                            </div>
                        </div>
                            <hr class="u-divider-linear-gradient u-divider-linear-gradient-gray-dark-v2 " style="height:1px;">

                        <div class="row">
                            <div class="col-md-6 text-center">
                                <form asp-area="Car_User" asp-controller="Car_User" asp-action="CarDetails_User" asp-route-PickupDate="@PickupDate.ToString()" asp-route-ReturnDate="@ReturnDate.ToString()" >
                                    <input type="hidden" value="@Convert.ToInt32(dataRow["CarID"].ToString())" name="CarID" />
                                    <button type="submit" class="btn btn-primary " style="font-family:'Times New Roman', Times, serif; width:50%">Book</button>
                                </form>
                            </div>
                            <div class="col-md-6 text-center">
                                <form method="post" asp-area="Car_User" asp-controller="Car_User" asp-action="CarDetails_User" asp-route-PickupDate="@PickupDate.ToString()" asp-route-ReturnDate="@ReturnDate.ToString()">
                                    <input type="hidden" value="@Convert.ToInt32(dataRow["CarID"].ToString())" name="CarID" />
                                    <button type="submit" class="btn btn-warning " style="font-family:'Times New Roman', Times, serif; width:50">Details</button>
                                </form>
                            </div>
                        </div>

                    </div>
                </div>






            }
        </div>

    </div>
    </div>
</section>
@section Scripts
    {
    <script>
        function fun1() {
            if (confirm("Are you sure you want to Book this Car \n From @PickupDate.ToString() To @ReturnDate.ToString()")) {
                return true;
            }
            else {
                return false;
            }
        }
    </script>
}